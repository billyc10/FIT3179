{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "height": 150,
    "width": 650,
    "title": "Fatality Rate By Road User Type",
    "data": {"url": "https://billyc10.github.io/FIT3179/data/fatal_crashes_vic_types.csv"},
    "encoding": {
        "x": {
            "field": "FATALITIES_PERK",
            "type": "quantitative",
            "title": "Fatalities per 1000 accidents involving transport type",
            "axis": {"titleFontSize": 14, "labelFontSize": 14}
        },
        "y": {
            "field":"CATEGORY",
            "type": "nominal",
            "sort": [
                "Driver", "Bicyclist", "Motorcyclist", "Pedestrian"
            ],
            "title": "Road User Type",
            "axis": {"titleFontSize": 14, "labelFontSize": 12}
        }
    },
    "layer": [
        {
            "mark": {
                "type": "bar",
                "height": 20,
                "color": "#db646f"
              },
              "encoding": {
                "x": {
                    "field": "FATALITIES_PERK",
                    "type": "quantitative",
                    "title": "Fatalities per 1000 accidents involving transport type"
                },
                "y": {
                    "field":"CATEGORY",
                    "type": "nominal",
                    "title": "Road User Type"
                },
                "tooltip": [
                   {"field": "CATEGORY", "title": "Road user type"},
                   {"field": "ACCIDENTS", "title": "Total accidents"},
                   {"field": "FATALITIES", "title": "Fatalities"},
                   {"field": "FATALITIES_PERK", "title": "Fatalities per 1000 accidents", "format": ".0f"}
                ]

              }
        },
        {
            "transform": [
                {"filter": "datum.FATALITIES_PERK > 10"}
            ],
            "mark": {
                "type": "bar",
                "height": 20,
                "color": "#99000d"
              },
              "encoding": {
                "x": {
                    "field": "FATALITIES_PERK",
                    "type": "quantitative",
                    "title": "Fatalities per 1000 accidents involving transport type"
                },
                "y": {
                    "field":"CATEGORY",
                    "type": "nominal",
                    "title": "Road User Type"
                },
                "tooltip": [
                   {"field": "CATEGORY", "title": "Road user type"},
                   {"field": "ACCIDENTS", "title": "Total accidents"},
                   {"field": "FATALITIES", "title": "Fatalities"},
                   {"field": "FATALITIES_PERK", "title": "Fatalities per 1000 accidents", "format": ".0f"}
                ]

              }
        }
    ],
    "config": {
        "title": {
          "fontSize": 20,
          "fontWeight": 600
        }
    }
  }